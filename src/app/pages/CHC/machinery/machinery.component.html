<div class="header bg-gradient-danger pb-7 pt-5 pt-md-8">
  <div class="container-fluid">
  </div>
</div>
<!-- Page content -->
<div class="container-fluid mt--7 mp-7">
  <!-- Table -->
  <div class="row">
    <div class="col">
      <div class="card shadow">
        <div class="card-header border-0">
          <div class="row">
            <div class="col-9">
              <h3 class="mb-0">{{'Machinery/Equipment' | translate}}</h3>
            </div>
          </div>
        </div>
        <div class="card-body">
          <form name="machineryForm" #machineryForm="ngForm">
            <div class="pl-lg-4">
              <div class="row">
                <div class="col-lg-6">
                  <div class="form-group">
                    <label>{{'Equipment Category' | translate}} <span class="required">*</span></label>
                    <select class="form-control" (change)="getEquipment($event.target.value)" name="type" required #type="ngModel"
                      [(ngModel)]="formData.type_id">
                      <option value="" disabled>{{'Select Type' | translate}}</option>
                      <option *ngFor="let row of equipmentTypes" [value]="row.machineTypeId">
                        {{row.equipType}}</option>
                    </select>
                    <div *ngIf="type.invalid && (type.dirty || type.touched)" class="text-danger">
                      <div>{{'Equipment Category is required'|translate}}</div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class="form-group">
                    <label>{{'Equipment Name' | translate}} <span class="required">*</span></label>
                    <!-- <input type="text" id="input-first-name" class="form-control form-control-alternative"
                      name="Equipment" [(ngModel)]="formData.equipment"> -->
                    <select class="form-control" name="Equipment" required #Equipment="ngModel"
                      [(ngModel)]="formData.name_id">
                      <option value="" disabled>{{'Select Equipment' | translate}}</option>
                      <option *ngFor="let row of equipmentName | async" [value]="row.id">
                        {{row.equpmentname}}</option>
                    </select>
                    <div *ngIf="Equipment.invalid && (Equipment.dirty || Equipment.touched)" class="text-danger">
                      <div>{{'Equipment Name is required'|translate}}</div>
                    </div>
                  </div>
                </div>

                <div class="col-lg-6">
                  <div class="form-group">
                    <label>{{'Equipment Capacity' | translate}} <span class="required">*</span></label>
                    <input type="text" id="EquipmentCapacity" appOnlynumber
                      class="form-control form-control-alternative" name="EquipmentCapacity"
                      [(ngModel)]="formData.capacity" required #equipmentCapacity="ngModel">
                    <div *ngIf="equipmentCapacity.invalid && (equipmentCapacity.dirty || equipmentCapacity.touched)"
                      class="text-danger">
                      <div>{{'Equipment Capacity is required'|translate}}</div>
                    </div>
                  </div>
                </div>

                <div class="col-lg-6">
                  <div class="form-group">
                    <label>{{'Equipment Purchase Year' | translate}} <span class="required">*</span></label>
                    <!-- <input type="date" id="input-first-name" class="form-control form-control-alternative"
                      data-date-format="DD-MM-YYYY" name="Purchase Year" [(ngModel)]="formData.purchase_year" required
                      #purchaseYear="ngModel"> -->
                    <input type="text" class="form-control" bsDatepicker
                      [bsConfig]="{ isAnimated: true, containerClass: 'theme-red' }" name="Purchase Year"
                      [(ngModel)]="formData.purchase_year" required #purchaseYear="ngModel">
                    <div *ngIf="purchaseYear.invalid && (purchaseYear.dirty || purchaseYear.touched)"
                      class="text-danger">
                      <div>{{'Equipment Purchase Year is required'|translate}}</div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class="form-group">
                    <label>{{'Image of the Equipment' | translate}}</label>
                    <input type="file" id="file" class="form-control form-control-alternative"
                      (change)="upload($event.target.files)" #myInput>
                  </div>
                </div>

                <div class="col-lg-6">
                  <div class="form-group">
                    <label>{{'Equipment Manufacturer (company/Brand)' | translate}} <span
                        class="required">*</span></label>
                    <input type="text" id="company" class="form-control form-control-alternative"
                      name="Equipment Manufacturer" [(ngModel)]="formData.company" required
                      #equipmentManufacturer="ngModel">
                    <div
                      *ngIf="equipmentManufacturer.invalid && (equipmentManufacturer.dirty || equipmentManufacturer.touched)"
                      class="text-danger">
                      <div>{{'Equipment Manufacturer (company/Brand) is required'|translate}}</div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class="form-group">
                    <label>{{'Quantity Available' | translate}}</label>
                    <input type="text" id="quantity" class="form-control form-control-alternative" name="quantity"
                      appOnlynumber [(ngModel)]="formData.quantity">
                  </div>
                </div>

                <div class="col-lg-6">
                  <div class="form-group">
                    <label>{{'Rent/day' | translate}}</label>
                    <input type="text" id="rent" class="form-control form-control-alternative" appOnlynumber name="rent"
                      [(ngModel)]="formData.rent">
                  </div>
                </div>

                <div class="col-lg-12">
                  <div class="form-group">
                    <label>{{'Whether Govt.-assistance used in procurement of Equipment' |
                                            translate}}</label>
                    <div class="col-lg-6">
                      <div class="form-group">
                        <label class="form-control-label" for="Documents">
                          {{'Documents' | translate}}
                          <span class="required">*</span> :
                          <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" [(ngModel)]="formRadio" name="inlineRadio"
                              id="inlineRadio1" [value]="true">
                            <label class="form-check-label" for="inlineRadio1">{{'Yes' | translate}}</label>
                          </div>
                          <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" [(ngModel)]="formRadio" name="inlineRadio"
                              id="inlineRadio2" [value]="false">
                            <label class="form-check-label" for="inlineRadio2">{{'No' | translate}}</label>
                          </div>
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-12" *ngIf="formRadio">
                  <div class="form-group">
                    <label>{{'Govt. Scheme under which -assistance was provided' |
                                            translate}} <span class="required">*</span></label>
                    <input type="text" id="govt" class="form-control form-control-alternative" name="govt scheme"
                      [(ngModel)]="formData.govt_scheme" required #govt_scheme="ngModel">
                    <div *ngIf="govt_scheme.invalid && (govt_scheme.dirty || govt_scheme.touched)" class="text-danger">
                      <div>{{'This field in required'|translate}}</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>
        <div class="card-footer py-4 text-center">
          <button *ngIf="!isEdit" class="btn btn-yellow"
            (click)="addMachinery(machineryForm)">{{'Save' | translate}}</button>
          <button *ngIf="isEdit" class="btn btn-yellow"
            (click)="updateMachinery(machineryForm)">{{'Update' | translate}}</button>
          <button class="btn btn-warning"
            (click)="machineryForm.reset();isEdit=false;formData={};formRadio=true">{{'Reset' | translate}}</button>
        </div>
      </div>
    </div>
  </div>
  <br />
  <!-- Table -->
  <div class="row">
    <div class="col">
      <div class="card shadow">
        <div class="card-header border-0">
          <div class="row">
            <div class="col-9">
              <h3 class="mb-0">
                {{'Machinery/Equipment details' | translate}}
              </h3>
            </div>
          </div>
        </div>
        <div class="border border-dark m-4">
          <div class="cust-head mx-3 p-3">
            <div class="mr-2">
              <input type="text" [id]="'search'" [(ngModel)]="searchText" (input)="currentPage=1"
                style="border-radius: 0;" name="search" placeholder="Search" autocomplete="off"
                class="form-control input-md" />
            </div>
            <div>
            </div>
          </div>
          <div class="table-responsive">
            <table class="table table-bordered table-striped">
              <thead class="thead-light">
                <tr>
                  <th scope="col">{{'S.no' | translate}}</th>
                  <th scope="col"> {{'Equipment Category' | translate}}</th>
                  <th scope="col"> {{'Equipment Name' | translate}}</th>
                  <th scope="col"> {{'Equipment Available' | translate}}</th>
                  <th scope="col">{{'Equipment Capacity' | translate}}</th>
                  <th scope="col">{{'Equipment Purchase Year' | translate}}</th>
                  <th scope="col">{{'Actions' | translate}}</th>
                </tr>
              </thead>
              <tbody>
                <tr
                  *ngFor="let p of (machineryList | async) | tableSearch:searchText  | sort:orderBy  | paginate: { itemsPerPage: 10, currentPage: currentPage };let i=index">
                  <td>
                    {{(currentPage-1) * 10 + i + 1}}
                  </td>
                  <td>
                    {{p.type}}
                  </td>
                  <td>
                    {{p.equpment_name}}
                  </td>
                  <td>
                    {{p.quantity_avail}}
                  </td>
                  <td>
                    {{p.equipment_capacity}}
                  </td>
                  <td>
                    {{p.equip_purchase_year}}
                  </td>
                  <td class="text-center">
                    <div ngbDropdown placement="bottom-center">
                      <a class="btn btn-sm btn-primary" ngbDropdownToggle>
                        {{'Actions' | translate}}
                      </a>
                      <div ngbDropdownMenu class=" dropdown-menu-center dropdown-menu-arrow">
                        <a class="dropdown-item" (click)="editData(p)">{{'Edit' |
                          translate}}</a>
                        <a class="dropdown-item" (click)="deleteMachinery(p.id)">{{'Delete' |
                          translate}}</a>
                      </div>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="row mx-0 mt-2" style="align-items: center;">
            <div class="col-sm-6 col-xs-12 col-12 custom-data-entries-align">
              <!-- <div>Showing 1 of 4 entries</div> -->
            </div>
            <div class="col-xs-12 col-sm-6 col-12 custom-pagination-align">
              <pagination-controls (pageChange)="currentPage = $event"></pagination-controls>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
