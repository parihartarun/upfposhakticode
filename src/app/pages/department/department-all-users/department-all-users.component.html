<div class="header pb-7 pt-5 pt-md-8">
  <div class="container-fluid">

  </div>
</div>
<!-- Page content -->
<div class="container-fluid mt--7 mp-7">
  <div class="row">
    <div class="col">
      <div class="card shadow">
        <div class="card-header border-0">
          <div class="row">
            <div class="col-9">
              <h3 class="mb-0">{{'FPO Users' | translate}}</h3>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <br />

  <!-- Table -->
  <div class="row mb-4">
    <div class="col">
      <div class="card shadow">
        <div class="card-header border-0">
          <div class="row">
            <div class="col-9">
              <h3 class="mb-0">{{'All Inactive FPO Users' | translate}}</h3>
            </div>
            <!-- <div class="col-3 text-right">
              <button class="btn btn-primary text-right">Add Member</button>
            </div> -->
          </div>
        </div>

        <div class="card-body">
          <div class="border border-dark">
            <div class="cust-head mx-3 p-3">
              <div class="mr-2">
                <input type="text" [id]="'search'" [(ngModel)]="searchText" (input)="p=1" style="border-radius: 0;z-index: unset;"
                  name="search" placeholder="Search" autocomplete="off" class="form-control input-md" />
              </div>
              <div class="col text-right">
                <button class="btn btn-primary text-right mb-2" (click)="createPdf(deActiveUsers, 'Inactive')">{{'Export PDF' | translate}}</button>
                <button class="btn btn-warning text-right mb-2" (click)="exportAsXLSX(deActiveUsers, 'Inactive')">{{'Export Excel' | translate}}</button>
              </div>
            </div>
            <div class="table-responsive">
              <table class="table table-bordered table-striped">
                <thead class="thead-light">
                  <tr>
                    <th scope="col">{{'S.No' | translate}}</th>
                    <th scope="col" class="sort" (click)="onClickOrderBy('fpo_name')">{{'FPO Name' | translate}}</th>
                    <th scope="col" class="sort" (click)="onClickOrderBy('user_name')">{{'Username' | translate}}
                    </th>
                    <th scope="col" class="sort" (click)="onClickOrderBy('district_name')">
                      {{'District Name' | translate}}
                    </th>
                    <th scope="col" class="sort" (click)="onClickOrderBy('date_of_regi')">{{'Request Date' | translate}}
                    </th>
                    <th scope="col" class="sort" (click)="onClickOrderBy('fpo_email')">{{'Email' | translate}}</th>
                    <th scope="col"></th>
                  </tr>
                </thead>
                <tbody>
                  <tr
                    *ngFor="let u of deActiveUsers | tableSearch:searchText  | sort:orderBy  | paginate: { id: 'pagination1', itemsPerPage: 10, currentPage: p } let i=index">
                    <td>
                      {{ (p-1) * 10 + i + 1}}
                    </td>
                    <td>
                      <a href="{{siteUrl}}fpo-details/{{u.user_id}}" target="_blank">{{u.fpo_name}}</a>
                    </td>
                    <td>
                      {{u.user_name}}
                    </td>
                    <td>
                      {{u.district_name}}
                    </td>
                    <td>
                      {{u.date_of_regi}}
                    </td>
                    <td>
                      {{u.fpo_email}}
                    </td>

                    <td class="text-right">
                      <div ngbDropdown placement="bottom-right">
                        <a class="btn btn-sm btn-primary" (click)="activeUSer(u)">
                          {{'Activate' | translate}}
                        </a>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div class="card-footer py-4">
                <nav aria-label="..." class="text-right">
                  <pagination-controls id="pagination1" (pageChange)="p = $event"></pagination-controls>
                </nav>
              </div>
            </div>
          </div>
        </div>
        <!-- <div class="card-footer py-4">
          <nav aria-label="..." class="text-right">
            <pagination-controls (pageChange)="p = $event"></pagination-controls>
          </nav>
        </div> -->
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <div class="card shadow">
        <div class="card-header border-0">
          <div class="row">
            <div class="col-9">
              <h3 class="mb-0">{{'All Active FPO Users' | translate}}</h3>
            </div>
            <!-- <div class="col-3 text-right">
              <button class="btn btn-primary text-right">Add Member</button>
            </div> -->
          </div>
        </div>

        <div class="card-body">
          <div class="border border-dark">
            <div class="cust-head mx-3 p-3">
              <div class="mr-2">
                <input type="text" [id]="'searchTextActive'" [(ngModel)]="searchTextActive" (input)="activePagination=1"
                  style="border-radius: 0;z-index: unset;" name="searchTextActive" placeholder="Search" autocomplete="off"
                  class="form-control input-md" />
              </div>
              <div class="col text-right">
                <button class="btn btn-primary text-right mb-2" (click)="createPdf(activeUsers, 'Active')">{{'Export PDF' | translate}}</button>
                <button class="btn btn-warning text-right mb-2" (click)="exportAsXLSX(activeUsers, 'Active')">{{'Export Excel' | translate}}</button>
              </div>
              <div>
              </div>
            </div>

            <div class="table-responsive">
              <table class="table table-bordered table-striped">
                <thead class="thead-light">
                  <tr>
                    <th scope="col">{{'S.No' | translate}}</th>
                    <th scope="col" class="sort" (click)="onClickOrderByActive('fpo_name')">{{'FPO Name' | translate}}
                    </th>
                    <th scope="col" class="sort" (click)="onClickOrderByActive('user_name')">{{'Username' | translate}}
                    </th>
                    <th scope="col" class="sort" (click)="onClickOrderByActive('district_name')">
                      {{'District Name' | translate}}
                    </th>
                    <th scope="col" class="sort" (click)="onClickOrderByActive('date_of_regi')">
                      {{'Request Date' | translate}}
                    </th>
                    <th scope="col" class="sort" (click)="onClickOrderByActive('fpo_email')">{{'Email' | translate}}
                    </th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <tr
                    *ngFor="let u of activeUsers  | tableSearch:searchTextActive  | sort:orderByActive   | paginate: { id: 'pagination2', itemsPerPage: 10, currentPage: activePagination } let i=index">
                    <td>
                      {{ (activePagination-1) * 10 + i + 1}}
                    </td>
                    <td>
                      <a href="{{siteUrl}}fpo-details/{{u.user_id}}" target="_blank">{{u.fpo_name}}</a>
                    </td>
                    <td>
                      {{u.user_name}}
                    </td>
                    <td>
                      {{u.district_name}}
                    </td>
                    <td>
                      {{u.date_of_regi}}
                    </td>
                    <td>
                      {{u.fpo_email}}
                    </td>

                    <td class="text-right">
                      <div ngbDropdown placement="bottom-right">
                        <a class="btn btn-sm btn-primary" data-backdrop="static" data-keyboard="false"
                          data-toggle="modal" data-target="#myModal" (click)="DeActiveUSer(u)">
                          {{'Deactivate' | translate}}
                        </a>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="row mx-0 mt-2" style="align-items: center;">
              <div class="col-sm-6 col-xs-12 col-12 custom-data-entries-align">
                <!-- <div>Showing 1 of 4 entries</div> -->
              </div>
              <div class="col-xs-12 col-sm-6 col-12 custom-pagination-align">
                <pagination-controls id="pagination2"  (pageChange)="activePagination = $event"></pagination-controls>
              </div>
            </div>
          </div>
        </div>
        <!-- <div class="card-footer py-4">
          <nav aria-label="..." class="text-right">
            <pagination-controls (pageChange)="p = $event"></pagination-controls>
          </nav>
        </div> -->
      </div>
    </div>
  </div>
</div>



<div class="modal" id="myModal" tabindex="-1">
  <div class="modal-dialog">
    <form [formGroup]="reasonSelectedForm">
      <div class="modal-content">

        <div class="modal-header">
          <h4 class="modal-title">{{'Add reason of deactivation' | translate}}</h4>
          <!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
        </div>

        <div class="modal-body">
          <label class="form-control-label">{{'Reason of deactivation' | translate}} </label>
          <div class="input-group input-group-alternative">
            <div class="input-group-prepend">
              <span class="input-group-text"></span>
            </div>
            <select class="form-control" formControlName="reasons" (change)="selectChange($event)">
              <option value="">{{'Select reason' | translate}}</option>
              <option *ngFor="let reason of Reasons" [value]="reason.reason">{{reason.reason}}</option>
            </select>
          </div><br>

          <div *ngIf="valueOther">
            <input type="text" class="form-control" formControlName="inputOthers">
          </div>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="saveDeactivate()"
            [disabled]="reasonSelectedForm.invalid">{{'Save' | translate}}</button>
          <button type="button" class="btn btn-danger" (click)="closeModal()"
            data-dismiss="modal">{{'close' | translate}}</button>
        </div>

      </div>
    </form>
  </div>
</div>
